hidden pmtiles = "pmtiles://https://hfu.github.io/worldpop-h3/pop.pmtiles"
hidden layer = "pop"
hidden key = 2020

version = 8
center = new Listing {
  125.623
  -8.6076
}
zoom = 6.81
pitch = 32
bearing = -23.8
sources {
  a { type = "vector" url = pmtiles attribution = "WorldPop" }
}
layers = new Listing {
  new {
    id = "background" type = "background"
    paint { `background-color` = "#000" }
  }
  new {
    id = layer type = "fill" source = "a"
    `source-layer` = layer
    paint {
      `fill-color` = 
      new Listing { "case"
        new Listing { "any"
          new Listing { "<" new Listing { "get" "\(key)" } 100 }
          new Listing { "<" new Listing { "get" "\(key - 1)" } 100 }
        }
        "#888888"
        new Listing {
          "interpolate-hcl"
          new Listing { "linear" }
          new Listing { "-" 
            new Listing { "ln" new Listing { "get" "\(key)" } }
            new Listing { "ln" new Listing { "get" "\(key - 1)" } }
          }
          -0.05
          "#ff0000"
          0
          "#ffffff"
          0.05
          "#00ff00"
        } 
      }
    }
  }
}
